CREATE DATABASE webbuds;                                                                   

USE webbuds;                                                                                 Katherine Namm Lillian Nidhi   

CREATE TABLE accounts(userID int AUTO_INCREMENT NOT NULL, email VARCHAR(320) NOT NULL UNIQUE, password VARCHAR(20) NOT NULL, 
PRIMARY KEY(userID));                                                                        

CREATE TABLE users (userID int(11) NOT NULL, name CHAR(225) NOT NULL, surname CHAR(225), photo MEDIUMBLOB, 
gender ENUM('Prefer not to say', 'Female', 'Male'),birthday DATE, PRIMARY KEY(userID), 
FOREIGN KEY(userID) REFERENCES accounts(userID));

CREATE TABLE setting_definitions (settingID int AUTO_INCREMENT NOT NULL, definition CHAR(225) NOT NULL,
PRIMARY KEY(settingID));

CREATE TABLE user_settings (userID int(11) NOT NULL, settingID int (11) NOT NULL, status ENUM('Visible', 'Not Visible') NOT NULL,
PRIMARY KEY(userID,SettingID), FOREIGN KEY(userID) REFERENCES users(userID), 
FOREIGN KEY(settingID) REFERENCES setting_definitions(settingID));

CREATE TABLE circles (circleID int AUTO_INCREMENT NOT NULL, name CHAR(254) NOT NULL, photo MEDIUMBLOB,
owner_userID int(11), date_created DATE NOT NULL, description VARCHAR(254),
PRIMARY KEY (circleID), FOREIGN KEY(owner_userID) REFERENCES users(userID));

CREATE TABLE blogs (blogID int AUTO_INCREMENT NOT NULL, name char(254) NOT NULL, owner_userID int(11) NOT NULL,
description VARCHAR(254), blogs_count INT(4) NOT NULL, access_rights ENUM ("all", "friends", "friends of friends","only me"),
PRIMARY KEY (blogID), FOREIGN KEY(owner_userID) REFERENCES users(userID));

CREATE TABLE blog_posts (postID int AUTO_INCREMENT NOT NULL, blogID INT(11) NOT NULL, text BLOB NOT NULL, dateAdded DATE NOT NULL 
DEFAULT getDate(), description VARCHAR(254), likes_count INT(5) NOT NULL DEFAULT '0',
PRIMARY KEY(postID), FOREIGN KEY(blogID) REFERENCES blogs(blogID));

CREATE TABLE blog_comments (commentID AUTO_INCREMENT NOT NULL, postID INT(11) NOT NULL, comment TEXT (2000) NOT NULL, date_added DATE NOT NULL
DEFAULT getDate(), commenterID INT(11) NOT NULL,
PRIMARY KEY commentID, FOREIGN KEY(postID) REFERENCES blog_comments(postID));
